<!-- <div class="overflow-visible pt-8">
  <div
    class="bg-cover md:bg-contain bg-center bg-no-repeat border-round"
    style="
      background-image: url('../../../../assets/images/sheriton-hotel.jpg');
    "
  >
    <p-card
      class="flex align-items-center justify-content-center flex-wrap py-8"
      [style]="{ width: '700px' }"
    >
      <h1 class="flex justify-content-center">Login</h1>
      <div class="flex flex-column md:flex-row">
        <div
          class="w-full md:w-5 flex flex-column align-items-center justify-content-center gap-3 py-5"
        >
          <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
            <div
              class="flex justify-content-center align-items-center gap-2 p-1"
            >
              <label class="form-label w-6rem">Username</label>
              <input
                pInputText
                type="text"
                formControlName="username"
                class="form-control w-12rem"
                [ngClass]="{ 'is-invalid': submitted && f['username'].errors }"
              />
            </div>
            <div
              *ngIf="submitted && f['username'].errors"
              class="invalid-feedback flex justify-content-center align-items-center"
            >
              <div
                class="text-red-500"
                *ngIf="f['username'].errors['required']"
              >
                Username is required
              </div>
            </div>
            <div
              class="flex flex-wrap justify-content-center align-items-center gap-2 p-1"
            >
              <label class="form-label w-6rem">Password</label>
              <input
                pInputText
                type="password"
                formControlName="password"
                class="form-control w-12rem"
                [ngClass]="{ 'is-invalid': submitted && f['password'].errors }"
              />
            </div>
            <div
              *ngIf="submitted && f['password'].errors"
              class="invalid-feedback flex justify-content-center align-items-center"
            >
              <div
                class="text-red-500"
                *ngIf="f['password'].errors['required']"
              >
                Password is required
              </div>
            </div>
            <div class="flex align-items-center justify-content-center py-6">
              <button pButton pRipple [disabled]="loading">
                <span
                  *ngIf="loading"
                  class="spinner-border spinner-border-sm mr-1"
                ></span>
                Login
              </button>
            </div>
            <div *ngIf="error" class="alert alert-danger mt-3 mb-0">
              {{ error }}
            </div>
          </form>
        </div>
        <div class="md:w-2">
          <p-divider layout="vertical" styleClass="hidden md:flex">
            <b>OR</b>
          </p-divider>
          <p-divider
            layout="horizontal"
            styleClass="flex md:hidden"
            [align]="'center'"
          >
            <b>OR</b>
          </p-divider>
        </div>
        <div class="md:w-5 flex align-items-center justify-content-center py-5">
          <p-button
            label="Sign Up"
            icon="pi pi-user-plus"
            styleClass="p-button-success w-10rem"
          />
        </div>
      </div>
      <ng-template pTemplate="footer">
        <div class="flex justify-content-center align-items-center gap-3 mt-1">
          <p-button label="Back" severity="secondary" styleClass="w-12rem" />
        </div>
      </ng-template>
    </p-card>
  </div>
</div> -->

<p-toast />
<p-dialog
  [(visible)]="visible"
  header="Reset my password"
  [style]="{ width: '25rem' }"
  [modal]="true"
  [closable]="!loading"
>
  <div class="flex flex-column gap-2">
    <label for="email">Email</label>
    <input
      pInputText
      id="email"
      aria-describedby="email-help"
      [(ngModel)]="email"
    />
    <small id="email-help"> Enter your email to reset your password. </small>
  </div>
  <div class="pt-4" [hidden]="!loading">
    <p-progressBar mode="indeterminate" [style]="{ height: '6px' }" />
  </div>
  <div></div>
  <ng-template pTemplate="footer">
    <p-button
      label="Cancel"
      [text]="true"
      severity="secondary"
      (click)="visible = false"
      [disabled]="loading"
    />
    <p-button
      label="Request"
      [outlined]="true"
      severity="primary"
      (click)="resetMyPassword()"
      [disabled]="loading"
    />
  </ng-template>
</p-dialog>
<div
  class="flex justify-content-center align-items-center fadein animation-duration-1000"
>
  <div class="inline-block">
    <p-image
      class="hidden md:block lg:block pt-4"
      src="assets/images/sheriton-hotel.jpeg"
      alt="Image"
      width="800"
      height="690"
    />
  </div>
  <p-card
    class="flex justify-content-center align-items-center p-3 w-full md:w-24rem lg:w-7 md:flex-column"
    [style]="{ width: '600px' }"
    styleClass="w-full"
  >
    <p-button
      class="flex justify-content-end align-items-end"
      icon="pi pi-home"
      [rounded]="true"
      [text]="true"
      [raised]="true"
      (onClick)="returnHome()"
    />
    <div class="text-center mb-2 p-4">
      <img
        src="assets/images/logo2.png"
        alt="Image"
        height="130"
        class="mb-3"
      />
      <div class="text-900 text-xl font-semibold mb-3">Welcome Back</div>
      <span class="text-600 text-600 font-medium line-height-3"
        >Don't have an account?</span
      >
      <a
        class="font-medium no-underline ml-2 text-blue-500 cursor-pointer hover:text-cyan-700"
        >Create today!</a
      >
    </div>
    <div class="md:flex justify-content-evenly align-content-evenly">
      <div *ngIf="error" class="alert alert-danger mt-3 mb-0">
        <p-messages
          [(value)]="messages"
          [enableService]="false"
          [closable]="false"
        />
      </div>
      <div
        *ngIf="submitted && f['password'].errors"
        class="invalid-feedback flex justify-content-center align-items-center"
      >
        <div class="justify-content-center align-items-center text-sm">
          <div *ngIf="f['password'].errors['required']">
            <p-messages
              class="text-sm"
              [(value)]="passwordIsRequired"
              [enableService]="false"
              [closable]="false"
            />
          </div>
        </div>
      </div>

      <div
        *ngIf="submitted && f['username'].errors"
        class="invalid-feedback flex justify-content-center align-items-center"
      >
        <div *ngIf="f['username'].errors['required']">
          <p-messages
            class="text-sm"
            [(value)]="userNameIsRequired"
            [enableService]="false"
            [closable]="false"
          />
        </div>
      </div>
    </div>

    <div *ngIf="!showAdditionalInfoForm">
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <div>
          <div class="flex justify-content-evenly align-items-center gap-2 p-1">
            <label class="block text-900 font-medium mb-2">Username</label>
            <input
              pInputText
              type="text"
              formControlName="username"
              class="form-control w-full mb-3"
              [ngClass]="{ 'is-invalid': submitted && f['username'].errors }"
            />
          </div>

          <div class="flex justify-content-evenly align-items-center gap-2 p-1">
            <label for="password" class="block text-900 font-medium mb-2"
              >Password</label
            >
            <input
              pInputText
              id="password"
              type="password"
              formControlName="password"
              class="form-control w-full mb-3"
              [ngClass]="{ 'is-invalid': submitted && f['password'].errors }"
            />
          </div>

          <div class="flex align-items-center justify-content-between mb-4">
            <div class="flex align-items-center">
              <p-checkbox
                id="rememberme"
                [binary]="true"
                styleClass="mr-2"
              ></p-checkbox>
              <label for="rememberme1">Remember me</label>
            </div>
            <div aria-hidden="true">
              <a (click)="showDialog()">Forgot password?</a>
            </div>
          </div>

          <div class="form-group">
            <button
              pButton
              pRipple
              label="Sign In"
              icon="pi pi-user"
              class="w-full"
              [disabled]="loading"
            >
              <p-progressSpinner
                *ngIf="loading"
                styleClass="h-1rem w-1rem"
                strokeWidth="6"
                ariaLabel="loading"
              />
            </button>
          </div>
          <asl-google-signin-button
            type="standard"
            size="large"
            class="w-full mt-2"
            (click)="externalLogin()"
          ></asl-google-signin-button>
        </div>
      </form>
    </div>

    <div *ngIf="showAdditionalInfoForm" class="additional-info-form">
      <form
        [formGroup]="additionalInfoForm"
        (ngSubmit)="onAdditionalInfoSubmit()"
      >
        <div class="p-fluid">
          <div class="p-field" style="margin-bottom: 1rem">
            <label for="firstName">First Name</label>
            <input
              id="firstName"
              type="text"
              pInputText
              formControlName="firstName"
              class="form-control"
              [ngClass]="{
                'is-invalid':
                  submitted && f2['firstName'].errors
              }"
            />
            <div
              *ngIf="submitted &&  f2['firstName'].errors"
              class="invalid-feedback"
            >
              <p-messages
                [value]="firstNameIsRequired"
                [closable]="false"
              ></p-messages>
            </div>
          </div>
          <div class="p-field" style="margin-bottom: 1rem">
            <label for="lastName">Last Name</label>
            <input
              id="lastName"
              type="text"
              pInputText
              formControlName="lastName"
              class="form-control"
              [ngClass]="{
                'is-invalid':
                  submitted && f2['lastName'].errors
              }"
            />
            <div
              *ngIf="submitted && f2['lastName'].errors"
              class="invalid-feedback"
            >
              <p-messages
                [value]="lastNameIsRequired"
                [closable]="false"
              ></p-messages>
            </div>
          </div>
          <div class="p-field" style="margin-bottom: 1rem">
            <label for="phoneNumber">Phone Number</label>
            <input
              id="phoneNumber"
              type="text"
              pInputText
              formControlName="phoneNumber"
              class="form-control"
              [ngClass]="{
                'is-invalid':
                  submitted && f2['phoneNumber'].errors
              }"
            />
            <div
              *ngIf="submitted && f2['phoneNumber'].errors"
              class="invalid-feedback"
            >
              <p-messages
                [value]="phoneNumberIsRequired"
                [closable]="false"
              ></p-messages>
            </div>
          </div>
        </div>
        <button
          pButton
          label="Submit"
          icon="pi pi-check"
          type="submit"
          [disabled]="loading"
        ></button>
      </form>
    </div>

    <ng-template pTemplate="footer">
      <div class="flex justify-content-center gap-3 mt-1">
        <div class="font-medium text-900 mb-2 underline">
          Â© 2024 Sheriton Hotel, Vietnam.
        </div>
        <div class="font-medium text-900 mb-2">All rights reserved</div>
      </div>
    </ng-template>
  </p-card>
</div>
