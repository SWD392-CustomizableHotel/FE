<!-- eslint-disable @angular-eslint/template/elements-content -->
<app-header-shared></app-header-shared>
<div class="grid">
  <div class="col-12">
    <div class="card px-6 py-6">
      <p-toast></p-toast>
      <h5>Booking History</h5>
      <p-table
        #dt1
        [value]="bookings"
        [columns]="cols"
        dataKey="id"
        [loading]="loading"
        [rowHover]="true"
        [totalRecords]="totalRecords"
        styleClass="p-datatable-gridlines"
        [globalFilterFields]="['bookingId', 'roomType', 'rating', 'userName', 'service', 'amentities', 'payments']"
        responsiveLayout="scroll"
      >
        <ng-template pTemplate="caption">
          <div class="flex justify-content-between flex-column sm:flex-row">
            <div class="flex">
              <button
                pButton
                label="Clear"
                class="p-button-outlined mr-2"
                icon="pi pi-filter-slash"
                (click)="clear(dt1)"
              ></button>
            </div>
            <span class="p-input-icon-left mb-2">
              <i class="pi pi-search"></i>
              <input
                pInputText
                type="text"
                #filter
                (input)="onGlobalFilter(dt1, $event)"
                placeholder="Search Keyword"
                class="w-full"
              />
            </span>
          </div>
        </ng-template>
        <ng-template pTemplate="header" let-columns>
          <tr>
            <th style="min-width: 12rem" pSortableColumn="roomDescription">
              <div class="flex justify-content-between align-items-center">
                Room Description
                <p-sortIcon field="roomDescription"></p-sortIcon>
                <p-columnFilter
                  type="text"
                  field="roomDescription"
                  display="menu"
                  placeholder="Search by Room Description"
                ></p-columnFilter>
              </div>
            </th>
            <th style="min-width: 8rem" pSortableColumn="rating">
              <div class="flex justify-content-between align-items-center">
                Rating
                <p-sortIcon field="rating"></p-sortIcon>
                <p-columnFilter
                  type="text"
                  field="rating"
                  display="menu"
                  placeholder="Search by Rating"
                ></p-columnFilter>
              </div>
            </th>
            <th style="min-width: 8rem" pSortableColumn="userName">
              <div class="flex justify-content-between align-items-center">
                User Name
                <p-sortIcon field="userName"></p-sortIcon>
                <p-columnFilter
                  type="text"
                  field="userName"
                  display="menu"
                  placeholder="Search by User Name"
                ></p-columnFilter>
              </div>
            </th>
            <th style="min-width: 8rem" pSortableColumn="service">
              <div class="flex justify-content-between align-items-center">
                Services
                <p-sortIcon field="service"></p-sortIcon>
                <p-columnFilter
                  type="text"
                  field="service"
                  display="menu"
                  placeholder="Search by Services"
                ></p-columnFilter>
              </div>
            </th>
            <th style="min-width: 8rem" pSortableColumn="amentities">
              <div class="flex justify-content-between align-items-center">
                Amenities
                <p-sortIcon field="amentities"></p-sortIcon>
                <p-columnFilter
                  type="text"
                  field="amentities"
                  display="menu"
                  placeholder="Search by Amenities"
                ></p-columnFilter>
              </div>
            </th>
            <th style="min-width: 8rem" pSortableColumn="payments">
              <div class="flex justify-content-between align-items-center">
                Payments
                <p-sortIcon field="payments"></p-sortIcon>
                <p-columnFilter
                  type="text"
                  field="payments"
                  display="menu"
                  placeholder="Search by Payments"
                ></p-columnFilter>
              </div>
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-booking>
          <tr>
            <td>{{ booking.roomDescription }}</td>
            <td>{{ booking.rating }}</td>
            <td>{{ booking.userName }}</td>
            <td>{{ booking.service?.join(', ') }}</td>
            <td>{{ booking.amentities?.join(', ') }}</td>
            <td>{{ booking.payments?.join(', ') }}</td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="6">No bookings found.</td>
          </tr>
        </ng-template>
        <ng-template pTemplate="loadingbody">
          <tr>
            <td colspan="6">Loading booking data. Please wait.</td>
          </tr>
        </ng-template>
      </p-table>
      <div class="flex align-items-center justify-content-en">
        <span class="mx-1 text-color">Items per page: </span>
        <p-dropdown
          [options]="options"
          optionLabel="label"
          optionValue="value"
          [(ngModel)]="rows"
          (ngModelChange)="onRowsChange($event)"
        ></p-dropdown>
        <p-paginator
          (onPageChange)="onPageChange($event)"
          [showCurrentPageReport]="true"
          [first]="first"
          [rows]="rows"
          [totalRecords]="totalRecords"
          currentPageReportTemplate="{first} - {last} of {totalRecords}"
          [showPageLinks]="false"
          [showFirstLastIcon]="false"
        ></p-paginator>
      </div>
    </div>
  </div>
</div>
<app-footer-shared></app-footer-shared>
